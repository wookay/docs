<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home ¬∑ Octo.jl üêô</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Octo.jl üêô</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#SQL-Query-DSL"><span>SQL Query DSL</span></a></li><li><a class="tocitem" href="#Repo"><span>Repo</span></a></li><li><a class="tocitem" href="#Colored-SQL-statements"><span>Colored SQL statements</span></a></li><li><a class="tocitem" href="#Requirements"><span>Requirements</span></a></li></ul></li><li><a class="tocitem" href="Repo/">Repo</a></li><li><a class="tocitem" href="Schema/">Schema</a></li><li><a class="tocitem" href="Queryable/">Queryable</a></li><li><a class="tocitem" href="keywords_and_functions/">SQL keywords &amp; functions</a></li><li><a class="tocitem" href="elements/">SQL elements</a></li><li><span class="tocitem">Adapters</span><ul><li><a class="tocitem" href="Adapters/SQL/">Octo.Adapters.SQL</a></li><li><a class="tocitem" href="Adapters/PostgreSQL/">Octo.Adapters.PostgreSQL</a></li><li><a class="tocitem" href="Adapters/MySQL/">Octo.Adapters.MySQL</a></li><li><a class="tocitem" href="Adapters/SQLite/">Octo.Adapters.SQLite</a></li><li><a class="tocitem" href="Adapters/DuckDB/">Octo.Adapters.DuckDB</a></li><li><a class="tocitem" href="Adapters/ODBC/">Octo.Adapters.ODBC</a></li><li><a class="tocitem" href="Adapters/JDBC/">Octo.Adapters.JDBC</a></li><li><a class="tocitem" href="Adapters/Hive/">Octo.Adapters.Hive</a></li></ul></li><li><a class="tocitem" href="Pretty/">Pretty</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/wookay/Octo.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Octo.jl"><a class="docs-heading-anchor" href="#Octo.jl">Octo.jl</a><a id="Octo.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Octo.jl" title="Permalink"></a></h1><p><a href="https://github.com/wookay/Octo.jl">https://github.com/wookay/Octo.jl</a></p><p><code>Octo.jl</code> is an SQL Query DSL in <a href="https://julialang.org">Julia</a>. It also comes with a very useful tool called <a href="https://github.com/wookay/Octo.jl#repo">Repo</a>. You could <code>Repo.get</code>, <code>Repo.insert!</code> <code>Repo.update!</code> <code>Repo.delete!</code> for many database drivers without hand-written SQL.</p><p>It&#39;s influenced by <a href="https://github.com/elixir-ecto/ecto">Ecto</a>.</p><ul><li>‚òïÔ∏è   You can <a href="https://wookay.github.io/donate/">make a donation</a> to support this project.</li></ul><h2 id="SQL-Query-DSL"><a class="docs-heading-anchor" href="#SQL-Query-DSL">SQL Query DSL</a><a id="SQL-Query-DSL-1"></a><a class="docs-heading-anchor-permalink" href="#SQL-Query-DSL" title="Permalink"></a></h2><pre><code class="language-julia-repl hljs">julia&gt; using Octo.Adapters.SQL

julia&gt; struct User
       end

julia&gt; Schema.model(User, table_name=&quot;users&quot;)
| primary_key   | table_name   |
| ------------- | ------------ |
| id            | users        |

julia&gt; u = from(User)
FromItem users

julia&gt; [SELECT * FROM u]
SELECT * FROM users

julia&gt; [SELECT (u.name, u.salary) FROM u]
SELECT name, salary FROM users

julia&gt; [SELECT * FROM u WHERE u.id == 2]
SELECT * FROM users WHERE id = 2

julia&gt; to_sql([SELECT * FROM u WHERE u.id == 2])
&quot;SELECT * FROM users WHERE id = 2&quot;</code></pre><p><img src="https://wookay.github.io/docs/Octo.jl/assets/octo/structured.svg" alt="structured.svg"/></p><h2 id="Repo"><a class="docs-heading-anchor" href="#Repo">Repo</a><a id="Repo-1"></a><a class="docs-heading-anchor-permalink" href="#Repo" title="Permalink"></a></h2><p>Current supported database drivers:</p><ul><li>PostgreSQL(via <a href="https://github.com/invenia/LibPQ.jl">LibPQ.jl</a>)</li><li>SQLite(via <a href="https://github.com/JuliaDatabases/SQLite.jl">SQLite.jl</a>)</li><li>MySQL(via <a href="https://github.com/JuliaDatabases/MySQL.jl">MySQL.jl</a>)</li></ul><pre><code class="language-julia-repl hljs">julia&gt; using Octo.Adapters.PostgreSQL

julia&gt; Repo.debug_sql()
LogLevelDebugSQL::RepoLogLevel = -1

julia&gt; Repo.connect(
           adapter = Octo.Adapters.PostgreSQL,
           dbname = &quot;postgresqltest&quot;,
           user = &quot;postgres&quot;,
       )
Octo.Repo.Connection(false, &quot;postgresqltest&quot;, Main.PostgreSQLLoader, PostgreSQL connection (CONNECTION_OK) with parameters:
  user = postgres
  passfile = /Users/wookyoung/.pgpass
  dbname = postgresqltest
  port = 5432
  client_encoding = UTF8
  options = -c DateStyle=ISO,YMD -c IntervalStyle=iso_8601 -c TimeZone=UTC
  application_name = LibPQ.jl
  sslmode = prefer
  sslcompression = 0
  gssencmode = disable
  target_session_attrs = any)

julia&gt; struct Employee
       end

julia&gt; Schema.model(Employee, table_name=&quot;Employee&quot;, primary_key=&quot;ID&quot;)
| primary_key   | table_name   |
| ------------- | ------------ |
| ID            | Employee     |

julia&gt; Repo.execute([DROP TABLE IF EXISTS Employee])
[ Info: DROP TABLE IF EXISTS Employee

julia&gt; Repo.execute(Raw(&quot;&quot;&quot;
           CREATE TABLE Employee (
               ID SERIAL,
               Name VARCHAR(255),
               Salary FLOAT(8),
               PRIMARY KEY (ID)
           )&quot;&quot;&quot;))
‚îå Info: CREATE TABLE Employee (
‚îÇ     ID SERIAL,
‚îÇ     Name VARCHAR(255),
‚îÇ     Salary FLOAT(8),
‚îÇ     PRIMARY KEY (ID)
‚îî )

julia&gt; Repo.insert!(Employee, [
           (Name=&quot;Jeremy&quot;,  Salary=10000.50),
           (Name=&quot;Cloris&quot;,  Salary=20000.50),
           (Name=&quot;John&quot;,    Salary=30000.50),
           (Name=&quot;Hyunden&quot;, Salary=40000.50),
           (Name=&quot;Justin&quot;,  Salary=50000.50),
           (Name=&quot;Tom&quot;,     Salary=60000.50),
       ])
[ Info: INSERT INTO Employee (Name, Salary) VALUES ($1, $2) RETURNING ID    (Name = &quot;Jeremy&quot;, Salary = 10000.5), (Name = &quot;Cloris&quot;, Salary = 20000.5), (Name = &quot;John&quot;, Salary = 30000.5), (Name = &quot;Hyunden&quot;, Salary = 40000.5), (Name = &quot;Justin&quot;, Salary = 50000.5), (Name = &quot;Tom&quot;, Salary = 60000.5)
|   id |   num_affected_rows |
| ---- | ------------------- |
|    6 |                   6 |

julia&gt; Repo.get(Employee, 2)
[ Info: SELECT * FROM Employee WHERE ID = 2
|   id | name     |    salary |
| ---- | -------- | --------- |
|    2 | Cloris   |   20000.5 |
1 row.

julia&gt; Repo.get(Employee, 2:5)
[ Info: SELECT * FROM Employee WHERE ID BETWEEN 2 AND 5
|   id | name      |    salary |
| ---- | --------- | --------- |
|    2 | Cloris    |   20000.5 |
|    3 | John      |   30000.5 |
|    4 | Hyunden   |   40000.5 |
|    5 | Justin    |   50000.5 |
4 rows.

julia&gt; Repo.get(Employee, (Name=&quot;Jeremy&quot;,))
[ Info: SELECT * FROM Employee WHERE Name = &#39;Jeremy&#39;
|   id | name     |    salary |
| ---- | -------- | --------- |
|    1 | Jeremy   |   10000.5 |
1 row.

julia&gt; Repo.query(Employee)
[ Info: SELECT * FROM Employee
|   id | name      |    salary |
| ---- | --------- | --------- |
|    1 | Jeremy    |   10000.5 |
|    2 | Cloris    |   20000.5 |
|    3 | John      |   30000.5 |
|    4 | Hyunden   |   40000.5 |
|    5 | Justin    |   50000.5 |
|    6 | Tom       |   60000.5 |
6 rows.

julia&gt; Repo.insert!(Employee, (Name=&quot;Jessica&quot;, Salary=70000.50))
[ Info: INSERT INTO Employee (Name, Salary) VALUES ($1, $2) RETURNING ID    (Name = &quot;Jessica&quot;, Salary = 70000.5)
|   id |   num_affected_rows |
| ---- | ------------------- |
|    7 |                   1 |

julia&gt; Repo.update!(Employee, (ID=2, Salary=85000))
[ Info: UPDATE Employee SET Salary = $1 WHERE ID = 2    85000
|   num_affected_rows |
| ------------------- |
|                   1 |

julia&gt; Repo.delete!(Employee, (ID=3,))
[ Info: DELETE FROM Employee WHERE ID = 3
|   num_affected_rows |
| ------------------- |
|                   1 |

julia&gt; Repo.delete!(Employee, 3:5)
[ Info: DELETE FROM Employee WHERE ID BETWEEN 3 AND 5
|   num_affected_rows |
| ------------------- |
|                   2 |

julia&gt; em = from(Employee)
FromItem Employee

julia&gt; Repo.query(em)
[ Info: SELECT * FROM Employee
|   id | name      |    salary |
| ---- | --------- | --------- |
|    1 | Jeremy    |   10000.5 |
|    6 | Tom       |   60000.5 |
|    7 | Jessica   |   70000.5 |
|    2 | Cloris    |   85000.0 |
4 rows.

julia&gt; Repo.query([SELECT * FROM em WHERE em.Name == &quot;Cloris&quot;])
[ Info: SELECT * FROM Employee WHERE Name = &#39;Cloris&#39;
|   id | name     |    salary |
| ---- | -------- | --------- |
|    2 | Cloris   |   85000.0 |
1 row.

julia&gt; Repo.query(em, (Name=&quot;Cloris&quot;,))
[ Info: SELECT * FROM Employee WHERE Name = &#39;Cloris&#39;
|   id | name     |    salary |
| ---- | -------- | --------- |
|    2 | Cloris   |   85000.0 |
1 row.

julia&gt; ‚ùì = Octo.PlaceHolder
PlaceHolder

julia&gt; Repo.query([SELECT * FROM em WHERE em.Name == ‚ùì], [&quot;Cloris&quot;])
[ Info: SELECT * FROM Employee WHERE Name = $1    &quot;Cloris&quot;
|   id | name     |    salary |
| ---- | -------- | --------- |
|    2 | Cloris   |   85000.0 |
1 row.</code></pre><h3 id="Subqueries"><a class="docs-heading-anchor" href="#Subqueries">Subqueries</a><a id="Subqueries-1"></a><a class="docs-heading-anchor-permalink" href="#Subqueries" title="Permalink"></a></h3><pre><code class="language-julia-repl hljs">julia&gt; sub = from([SELECT * FROM em WHERE em.Salary &gt; 30000], :sub)
SubQuery (SELECT * FROM Employee WHERE Salary &gt; 30000) AS sub

julia&gt; Repo.query(sub)
[ Info: SELECT * FROM Employee WHERE Salary &gt; 30000
|   id | name      |    salary |
| ---- | --------- | --------- |
|    6 | Tom       |   60000.5 |
|    7 | Jessica   |   70000.5 |
|    2 | Cloris    |   85000.0 |
3 rows.

julia&gt; Repo.query([SELECT sub.Name FROM sub])
[ Info: SELECT sub.Name FROM (SELECT * FROM Employee WHERE Salary &gt; 30000) AS sub
| name      |
| --------- |
| Tom       |
| Jessica   |
| Cloris    |
3 rows.</code></pre><h2 id="Colored-SQL-statements"><a class="docs-heading-anchor" href="#Colored-SQL-statements">Colored SQL statements</a><a id="Colored-SQL-statements-1"></a><a class="docs-heading-anchor-permalink" href="#Colored-SQL-statements" title="Permalink"></a></h2><p><img src="https://raw.github.com/wookay/Octo.jl/master/docs/images/colored_sql_statements.png" alt="colored_sql_statements.png"/></p><h2 id="Requirements"><a class="docs-heading-anchor" href="#Requirements">Requirements</a><a id="Requirements-1"></a><a class="docs-heading-anchor-permalink" href="#Requirements" title="Permalink"></a></h2><p>You need <a href="https://julialang.org/downloads/">Julia</a>.</p><p><code>julia&gt;</code> type <code>]</code> key</p><pre><code class="language-julia-repl hljs">(v1.0) pkg&gt; add Octo</code></pre><pre><code class="language-julia-repl hljs">(v1.0) pkg&gt; add LibPQ   # for PostgreSQL (depends on LibPQ.jl 1.4, 1.6)
(v1.0) pkg&gt; add SQLite  # for SQLite     (depends on SQLite.jl 1.6)
(v1.0) pkg&gt; add MySQL   # for MySQL      (depends on MySQL.jl 1.0, 1.1)
(v1.0) pkg&gt; add DuckDB  # for DuckDB     (depends on DuckDB.jl 0.4)</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="Repo/">Repo ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.18 on <span class="colophon-date" title="Friday 8 September 2023 08:12">Friday 8 September 2023</span>. Using Julia version 1.8.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
